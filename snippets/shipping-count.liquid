<br>
<div> 
<div class="shipping-block">
	<p class="shipping-title">Estimate Shipping</p>
    <p>Get it by <span class="shipping-date">Fri, Dec 03</span><p>
</div>
<!-- <div class="shipping-block">
	<p class="shipping-title">Express Shipping</p>
    <p>Get it by <span class="shipping-date">Fri, Dec 03</span><p>
</div>
</div> -->



<script>
window.addEventListener('load', function () {
 const estDelEls = document.querySelectorAll(".shipping-date");
    if (!estDelEls || !estDelEls.length) {
        return;
    }
    const [minDate, maxDate] = estimatedDeliveryRange();
    const [minFormat, maxFormat] = [formatDate(minDate), formatDate(maxDate)];
    let estimatedDelivery
    if (minFormat === maxFormat) {
        estimatedDelivery = minFormat;
    } else {
        estimatedDelivery = `${minFormat} &mdash; ${maxFormat}`;
    }
    document.querySelectorAll(".shipping-date").forEach((el) => {
        el.innerHTML = estimatedDelivery;
    })
}, false);

const SATURDAY = 6
const SUNDAY = 0

function estimatedDeliveryRange(from = new Date(), minWorkDays = {{ section.settings.ed_min_workday }}, maxWorkDays = {{ section.settings.ed_max_workday }}) {
    const time = new Date(from.getTime())
    time.setHours(12, 0, 0, 0)
    let minDate
    let maxDate
    while (minWorkDays > 0 || maxWorkDays > 0) {
        time.setHours(time.getHours() + 24)
        if (time.getDay() !== SATURDAY && time.getDay() !== SUNDAY) {
            minWorkDays--
            maxWorkDays--
            if (minWorkDays <= 0 && !minDate) {
                minDate = new Date(time.getTime())
            }
            if (maxWorkDays <= 0 && !maxDate) {
                maxDate = new Date(time.getTime())
            }
        }
    }
    return [minDate, maxDate]
}

function formatDate(date = new Date()) {
    return new Intl.DateTimeFormat("en-US", {
        day: 'numeric',
        month: 'short',
    }).format(date);
}
</script>